# 🔥 CloutX Penetration Testing Suite

This folder contains all penetration testing tools and documentation for the CloutX smart contract ecosystem.

## 📁 Folder Structure

```
PENtest/
├── README.md                    # This file - overview and instructions
├── PENETRATION-TESTING.md       # Comprehensive testing guide
├── pentest-cloutx.js           # Main penetration testing script
├── deploy-for-pentest.js       # Deployment setup for testing
├── MaliciousContract.sol       # Test contract for security validation
└── reports/                    # Test results and reports (auto-generated)
```

## 🎯 Quick Start

### 1. Prerequisites
- Hardhat development environment set up
- Local Hardhat network running
- CloutX contracts deployed

### 2. Setup Testing Environment
```bash
# From CloutX root directory
cd PENtest
npx hardhat run deploy-for-pentest.js --network localhost
```

### 3. Run Penetration Tests
```bash
npx hardhat run pentest-cloutx.js --network localhost
```

## 🧪 Test Categories

| Category | Tests | Description |
|----------|-------|-------------|
| **Access Control** | 3 tests | Unauthorized access attempts |
| **Economic Security** | 2 tests | Tax evasion, staking exploits |
| **MEV Protection** | 1 test | Front-running attacks |
| **Anti-Bot** | 2 tests | Transaction limits, cooldowns |
| **Oracle Security** | 1 test | Data manipulation attempts |
| **Governance** | 1 test | Malicious proposals |
| **Mathematical** | 1 test | Overflow/underflow attacks |
| **Contract Interaction** | 1 test | Malicious contract tests |

## 📊 Security Scoring

- **90-100%**: 🟢 Production Ready
- **75-89%**: 🟡 Minor Issues
- **50-74%**: 🟠 Fix Required
- **0-49%**: 🔴 High Risk

## 🚀 Usage Examples

### Run All Tests
```bash
npx hardhat run pentest-cloutx.js --network localhost
```

### Check Current Results
Latest test results show **91.7% security score** with only 1 minor vulnerability.

### Custom Testing
Edit `pentest-cloutx.js` to add new test cases or modify existing ones.

## 📝 Files Description

### `pentest-cloutx.js`
Main penetration testing script that:
- Loads deployed contracts
- Simulates various attack vectors
- Generates comprehensive security reports
- Provides actionable recommendations

### `deploy-for-pentest.js`
Setup script that:
- Deploys malicious test contracts
- Verifies contract accessibility
- Prepares testing environment

### `MaliciousContract.sol`
Test contract for:
- Token draining attempts
- Allowance manipulation
- External contract interaction testing

### `PENETRATION-TESTING.md`
Comprehensive guide covering:
- Detailed test explanations
- Security best practices
- Vulnerability examples
- Fixing recommendations

## 🔧 Customization

### Adding New Tests
```javascript
async testCustomVulnerability() {
  return this.runTest("Custom Test Name", async () => {
    try {
      // Your attack simulation here
      await this.token.connect(this.attacker).vulnerableFunction();
      
      return {
        vulnerable: true,
        severity: "HIGH",
        description: "Custom vulnerability found",
        recommendation: "Fix recommendation"
      };
    } catch (error) {
      return {
        vulnerable: false,
        description: "Function is secure"
      };
    }
  });
}
```

### Modifying Test Parameters
Edit the test constants in `pentest-cloutx.js`:
- Attack amounts
- Test addresses
- Timing parameters
- Severity thresholds

## 📊 Latest Results Summary

**Current CloutX Security Assessment:**
- ✅ **11/12 tests passed** (secure)
- ⚠️ **1 minor issue** found (tax calculation)
- 🎯 **91.7% security score**
- 🟢 **Production ready** status

## 🚨 Important Notes

- **Test Network Only**: Never run on mainnet
- **Fresh Environment**: Always start with clean deployment
- **Regular Testing**: Run tests after any contract changes
- **Professional Audit**: Required before production deployment

## 🔄 Continuous Integration

To integrate with CI/CD:
```bash
# Add to your CI pipeline
npm run pentest
```

Create `package.json` script:
```json
{
  "scripts": {
    "pentest": "cd PENtest && npx hardhat run pentest-cloutx.js --network localhost"
  }
}
```

## 📞 Support

For issues or questions:
1. Check `PENETRATION-TESTING.md` for detailed guidance
2. Review test output for specific error messages
3. Examine contract code for security implementations
4. Test incrementally to isolate issues

---

**Security is paramount in DeFi. Regular penetration testing ensures CloutX remains secure against evolving threats.** 